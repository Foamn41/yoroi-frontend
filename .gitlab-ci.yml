image: node:12

cache:
  paths:
    - node_modules/
  policy: pull

stages:
  - prebuild
  - build
  - tests

static tests:
  stage: prebuild
  script:
    - npm install
    - npm run flow
    - npm run eslint

unit tests:
  stage: prebuild
  script:
    - npm install
    - npm run jest

test build:
  stage: build
  script:
    - npm install
    - ls
    - npm run test:build
    - ls

e2e tests:
  stage: tests
  script:
   - npm install
   - npm run test:run:e2e:chrome
